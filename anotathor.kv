#:include kvClasses/landmark.kv
#:include kvClasses/boundingBox.kv

<MainBox>:
  orientation: "horizontal"
  BoxLayout:
    orientation: "vertical"
    ToolbarContainer:
      orientation: "horizontal"
      size_hint_y: 0.05
      padding: 5
      spacing: 10

      AnotationSelect:
        id: anotationselect
        size_hint_x: 0.1

      Label:

    DisplayLayout:
      id: display

  ToolbarContainer:
    id: toolbar
    orientation: "vertical"
    size_hint_x: 0.1
    padding: 10
    spacing: 10

    BoxLayout:
      orientation: "horizontal"
      size_hint: (None, None)
      width: self.parent.width - 2*self.parent.spacing
      height: self.width/2

      ToggleButtonAlt:
        id: drag
        text: "Drag"
        group: "modeSelect"

      ToggleButtonAlt:
        id: insert
        text: "Insert"
        group: "modeSelect"

    BoxLayout:
      orientation: "horizontal"
      size_hint: (None, None)
      width: self.parent.width - 2*self.parent.spacing
      height: self.width/2

      ToggleButtonAlt:
        id: deleteToggle
        text: "Delete"
        group: "modeSelect"

      ToggleButton:

    Button: 
      size_hint_y: 0.2
      text: "Save"
      id: save

    Scaler:
      size_hint_y: 0.2
      orientation: "horizontal"
      id: annotationsize
      min: 0.0
      max: 1.0
      value: 0.5

    BoxLayout:
      canvas.before:
        Color:
          rgba: (0.1, 0.1, 0.1, 0.5)
        Rectangle:
          pos: self.pos
          size: self.size
      size_hint_y: 0.2
      orientation: "vertical"
      Label:
        text: "Anotations:"
      Label:
        id: anotationnumber
        # text: root.anotationNumber


    Button:
      size_hint_y: 0.2
      text: "Next"
      id: next

    Button:
      size_hint_y: 0.2
      text: "Prev"
      id: prev

    Label:
      size_hint_y: 0.4

    Button:
      size_hint_y: 0.2
      text: "Reload"
      id: reload

    Button:
      size_hint_y: 0.2
      text: "Clear all"
      id: clearall

<ControlBox>:
    orientation: 'horizontal'
    Label:
        size_hint_x: 0.4
        text: root.name
    # Label:
    BoxLayout:
        orientation: 'vertical'
        size_hint_x: 0.6
        BoxLayout:
            orientation: 'horizontal'
            Button:
                id: dec
                size_hint_x: 0.22
                text: "<"
                on_press: root.change_value(-1)
            TextInput:
                id: val
                size_hint_x: 0.22
                multiline: False
                write_tab: False
                is_focusable: True
                input_filter: root.input_filter
                text: ('{0:.'+str(root.precision)+'f}').format(root.value)
                on_focus: if not self.focus: root.value = min(root.max_val, max(root.min_val, float(self.text)))
                on_focus: if self.focus: self.select_all()
            Button:
                id: inc
                size_hint_x: 0.22
                text: ">"
                on_press:  root.change_value(1)
        BoxLayout:
            Slider:
                min: root.min_val
                max: root.max_val
                value: root.value
                on_value: root.value = round(root.perc_inc * (round(self.value*10**root.precision)//round(root.perc_inc*10**root.precision)), root.precision)
